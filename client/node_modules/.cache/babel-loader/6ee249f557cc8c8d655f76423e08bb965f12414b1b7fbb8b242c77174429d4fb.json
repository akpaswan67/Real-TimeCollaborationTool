{"ast":null,"code":"import _taggedTemplateLiteral from\"D:/MERN STACK/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import{useEffect,useState}from\"react\";import Quill from\"quill\";import'quill/dist/quill.snow.css';import{Box}from\"@mui/material\";import styled from\"@emotion/styled\";import{io}from'socket.io-client';import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";const Component=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\nbackground: #F5F5F5;\\n\"])));const toolbarOptions=[['bold','italic','underline','strike'],// toggled buttons\n['blockquote','code-block'],[{'header':1},{'header':2}],// custom button values\n[{'list':'ordered'},{'list':'bullet'}],[{'script':'sub'},{'script':'super'}],// superscript/subscript\n[{'indent':'-1'},{'indent':'+1'}],// outdent/indent\n[{'direction':'rtl'}],// text direction\n[{'size':['small',false,'large','huge']}],// custom dropdown\n[{'header':[1,2,3,4,5,6,false]}],[{'color':[]},{'background':[]}],// dropdown with defaults from theme\n[{'font':[]}],[{'align':[]}],['clean']// remove formatting button\n];const Editor=()=>{const[socket,SetSocket]=useState();const[quill,SetQuill]=useState();const{id}=useParams();useEffect(()=>{const quillServer=new Quill('#container',{theme:'snow',modules:{toolbar:toolbarOptions}});quillServer.disable();quillServer.setText('Loading the document...');SetQuill(quillServer);},[]);useEffect(()=>{const socketServer=io('https://collaborative-document-editing-system-2.onrender.com/');SetSocket(socketServer);return()=>{socketServer.disconnect();};},[]);useEffect(()=>{if(socket===null&&quill===null)return;const handleChange=(delta,oldData,source)=>{if(source!=='user')return;socket&&socket.emit('send-changes',delta);};quill&&quill.on('text-change',handleChange);return()=>{quill&&quill.off('text-change',handleChange);};},[quill,socket]);useEffect(()=>{if(socket===null&&quill===null)return;const handleChange=delta=>{quill.updateContents(delta);};socket&&socket.on('recieve-changes',handleChange);return()=>{socket&&socket.off('recieve-changes',handleChange);};},[quill,socket]);useEffect(()=>{if(quill===null||socket===null)return;socket&&socket.once('load-document',document=>{quill&&quill.setContents(document);quill&&quill.enable();});socket&&socket.emit('get-document',id);},[quill,socket,id]);useEffect(()=>{if(socket===null||quill===null)return;const interval=setInterval(()=>{socket&&socket.emit('save-document',quill.getContents());},2000);return()=>{clearInterval(interval);};},[socket,quill]);return/*#__PURE__*/_jsx(Component,{children:/*#__PURE__*/_jsx(Box,{className:\"container\",id:\"container\"})});};export default Editor;","map":{"version":3,"names":["useEffect","useState","Quill","Box","styled","io","useParams","jsx","_jsx","Component","div","_templateObject","_taggedTemplateLiteral","toolbarOptions","Editor","socket","SetSocket","quill","SetQuill","id","quillServer","theme","modules","toolbar","disable","setText","socketServer","disconnect","handleChange","delta","oldData","source","emit","on","off","updateContents","once","document","setContents","enable","interval","setInterval","getContents","clearInterval","children","className"],"sources":["D:/MERN STACK/client/src/component/Editor.jsx"],"sourcesContent":["import { useEffect,useState } from \"react\";\r\nimport Quill from \"quill\";\r\nimport 'quill/dist/quill.snow.css';\r\nimport { Box } from \"@mui/material\";\r\nimport styled from \"@emotion/styled\";\r\nimport {io} from 'socket.io-client';\r\nimport {useParams} from 'react-router-dom';\r\nconst Component= styled.div`\r\nbackground: #F5F5F5;\r\n`\r\n\r\nconst toolbarOptions = [\r\n\t['bold', 'italic', 'underline', 'strike'],        // toggled buttons\r\n\t['blockquote', 'code-block'],\r\n  \r\n\t[{ 'header': 1 }, { 'header': 2 }],               // custom button values\r\n\t[{ 'list': 'ordered'}, { 'list': 'bullet' }],\r\n\t[{ 'script': 'sub'}, { 'script': 'super' }],      // superscript/subscript\r\n\t[{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent\r\n\t[{ 'direction': 'rtl' }],                         // text direction\r\n  \r\n\t[{ 'size': ['small', false, 'large', 'huge'] }],  // custom dropdown\r\n\t[{ 'header': [1, 2, 3, 4, 5, 6, false] }],\r\n  \r\n\t[{ 'color': [] }, { 'background': [] }],          // dropdown with defaults from theme\r\n\t[{ 'font': [] }],\r\n\t[{ 'align': [] }],\r\n  \r\n\t['clean']                                         // remove formatting button\r\n  ];\r\nconst Editor=()=>{\r\n\tconst[socket,SetSocket]= useState();\r\n\tconst[quill,SetQuill]= useState();\r\n\tconst {id} = useParams();\r\n\r\n\tuseEffect(()=>{\r\n\t const quillServer = new Quill('#container',{theme:'snow', modules:{toolbar: toolbarOptions}});\r\n\t quillServer.disable();\r\n\t quillServer.setText('Loading the document...')\r\n\t SetQuill(quillServer);\r\n\t},[]);\r\n\r\n\tuseEffect(()=>{\r\n\t\tconst socketServer = io('https://collaborative-document-editing-system-2.onrender.com/');\r\n\t\tSetSocket(socketServer);\r\n\t\treturn ()=>{\r\n\t\t\tsocketServer.disconnect();\r\n\t\t}\r\n\t},[])\r\n\r\n\tuseEffect(()=>{\r\n\t\tif(socket===null && quill===null)return;\r\n\r\n\t\tconst handleChange = (delta, oldData, source)=>{\r\n\t\t\tif(source!== 'user')return;\r\n\r\n\t\tsocket && socket.emit('send-changes', delta);\r\n\t\t}\r\n\t\tquill && quill.on('text-change', handleChange);\r\n\t\t\r\n\t\t\treturn()=>{\r\n\t\t\t\tquill && quill.off('text-change', handleChange);\r\n\t\t\t}\r\n\t\t},[quill,socket])\r\n\r\n\t\tuseEffect(()=>{\r\n\t\t\tif(socket===null && quill===null)return;\r\n\t\r\n\t\t\tconst handleChange = (delta)=>{\r\n\t\r\n\t\t\tquill.updateContents(delta);\r\n\t\t\t}\r\n\t\t\tsocket && socket.on('recieve-changes', handleChange);\r\n\t\t\t\r\n\t\t\t\treturn()=>{\r\n\t\t\t\t\tsocket && socket.off('recieve-changes', handleChange);\r\n\t\t\t\t}\r\n\t\t\t},[quill,socket])\r\n\r\n\t\tuseEffect(()=>{\r\n\t\t\tif(quill ===null || socket===null)return;\r\n\r\n\t\t\tsocket && socket.once('load-document',document =>{\r\n\t\t\tquill && quill.setContents(document);\r\n\t\t\tquill && quill.enable();\r\n\t\t\t})\r\n\r\n\t\t\tsocket && socket.emit('get-document',id);\r\n\t\t},[quill, socket,id]);\r\n\r\n\t\tuseEffect(()=>{\r\n\t\t\tif(socket ===null || quill===null)return;\r\n\r\n\t\t\tconst interval = setInterval(()=>{\r\n\t\t\t\tsocket && socket.emit('save-document',quill.getContents());\r\n\t\t\t},2000);\r\n\t\t\treturn ()=>{\r\n\t\t\t\tclearInterval(interval);\r\n\t\t\t}\r\n\t\t},[socket,quill]);\r\n\treturn(\r\n\t\t<Component>\r\n\t\t\t<Box className='container' id='container'></Box>\r\n\t\t</Component>\r\n\t) \r\n}\r\nexport default Editor;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}